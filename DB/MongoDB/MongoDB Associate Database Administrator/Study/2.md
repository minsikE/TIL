# 2주차
## MongoDB CRUD Operations: Insert and Find Documents
### Lesson 1. Inserting Documents in a MongoDB Collection
- insertOne()
    - db.<collection>.insertOne()
    - db.grades.insertOne()
        - grades collection이 없으면 자동으로 만들어줌
    
    ```jsx
    	db.grades.insertOne(  {
    		student_id: 546799,
    			scores: [
    				{
    					type: "quiz",
    					score: 50,
    				},
    				{
    					type: "homework",
    					score: 70,
    				}				
    			]
    	}  )
    
    {
    	acknowledged: true,
    	insertedId: ObjectId("62f138664985719fd9fb98f6")
    }
    ```
    
- insertMany()
    - db.<collection>.insertMany([
        
        <document 1>,
        
        <document 2>,
        
        <document 3>,
        
        ])
        
    
    ```jsx
    db.grades.insertMany([
      {
        student_id: 546789,
        products: [
          {
            type: "quiz",
            score: 50,
          },
          {
            type: "homework",
            score: 70,
          },
          {
            type: "quiz",
            score: 66,
          },
          {
            type: "exam",
            score: 70,
          },
        ],
        class_id: 551,
      },
      {
        student_id: 777777,
        products: [
          {
            type: "exam",
            score: 83,
          },
          {
            type: "quiz",
            score: 59,
          },
          {
            type: "quiz",
            score: 72,
          },
          {
            type: "quiz",
            score: 67,
          },
        ],
        class_id: 550,
      },
      {
        student_id: 223344,
        products: [
          {
            type: "exam",
            score: 45,
          },
          {
            type: "homework",
            score: 39,
          },
          {
            type: "quiz",
            score: 40,
          },
          {
            type: "homework",
            score: 88,
          },
        ],
        class_id: 551,
      },
    ])
    ```
    

---

#### Quiz

1. **What methods are available in MongoDB for inserting a single document? (Select one.)**
- **A.** .insertOne()
    
    Correct! The `insertOne()` method is a valid method that's included in the MongoDB Shell to insert a single document.
    
- **B.** .inserting()
    
    Incorrect. This is not a valid method included in the MongoDB Shell. What method can you use to insert a single document?
    
- **C.** .InsertDocument()
    
    Incorrect. This is not a valid method included in the MongoDB Shell. What method can you use to insert a single document?
    
- **D.** .insertMany()
    
    Incorrect. The `insertMany()` method is used to insert multiple documents. What method can you use to insert a single document?
    
2. Select an answer choice and then click "See Results" to submit.

**What methods are available in MongoDB for inserting multiple documents? (Select one.)**

- **A.** .InsertDocument()
    
    Incorrect. The `InsertDocument()` method is not a valid MongoDB method to insert documents. What method can you use to insert a document?
    
- **B.** .inserting()
    
    Incorrect. `inserting()` is not a valid method included in the MongoDB Shell. What method can you use to insert a document?
    
- **C.** .insertOne()
    
    Incorrect. The `insertOne()` method is a valid method included in the MongoDB Shell, but it's used to insert a single document. What method can you use to insert multiple documents?
    
- **D.** .insertMany()
    
    Correct! The `insertMany()` method is a valid method that's included in the MongoDB Shell to insert multiple documents.
### Lesson 2. Finding Documents in a MongoDB Collection
- find()
    - db.<collection>.find()
    
    ```bash
    use training
    
    db.zips.find()
    
    it
    ```
    
  - 특정 문서 검색
    - $eq:
    
    ```bash
    { field: { $eq: <value> }  }
    db.zips.find({ _id: ObjectId("5c8eccc1caa187d17ca6ed16") })
    db.zips.find({ state: "AZ" })
    ```
    
    - $in
        - allows to select all documents that have a field value equal to any of the values specified in the array

    ```bash
    db.<collection>.find({
    	<field>: { $in:
    		[<value>, <value>, ...]
    })
    
    db.zips.find({ city: { $in: ["PHOENIX", "CHICAGO"] } })
    ```

---

#### Quiz

1. Select an answer choice and then click "See Results" to submit.

**What methods are available in MongoDB for finding documents? (Select one.)**

- **A.** .find()
    
    Correct! The `find()` method is a valid method that's included in the MongoDB Shell to find documents.
    
- **B.** .query()
    
    Incorrect. This is not a valid method included in the MongoDB Shell. What method can you use to find documents?
    
- **C.** .finding()
    
    Incorrect. This is not a valid method included in the MongoDB Shell. What method can you use to find documents?
    
- **D.** .search()
    
    Incorrect. This is not a valid method included in the MongoDB Shell. What method can you use to find documents?
    
2. Select an answer choice and then click "See Results" to submit.

**You are searching for data on a small area in downtown Chicago with the following zip codes:**

```
“60601”
“60602”
“60603”
“60604”
“60605”
“60606”
```

**Which of the following query documents should you use to ensure that only the documents with the specified zip codes are returned? (Select one.)**

- **A.** { zip: { $nin : [ "60601", "60602", "60603", "60604", "60605", "60606"] } }
    
    Incorrect. The `$nin` operator returns documents that do not contain the values specified in the array. Including this query would not return the specified Chicago zip codes.
    
- **B.** { zip: { $in : [ "60601", "60602", "60603", "60604", "60605", "60606"] } }
    
    Correct! The `$in` operator returns documents that contain the values specified in the array. This query will return the specified Chicago zip codes.
    
- **C.** { zip: { $eq : "60601", "60602", "60603", "60604", "60605", "60606" } }
    
    Incorrect. This syntax is inaccurate because the `$eq` operator matches documents that contain only one specified value.
    
- **D.** { zip: "60601", "60602", "60603", "60604", "60605", "60606" }
    
    Incorrect. This syntax is inaccurate because the implicit equality operator matches documents that contain only one specified value.
### Lesson 3. Finding Documents by Using Comparson Operators
#### 종류

- $gt (greater than)
- $lt (less than)
- $lte (less than or equal to)
- $gte (greater than or equal to)

#### 형식

- <field>: { <operator> : <value> }

#### 예시

```bash
db.sales.find({ "items.price": { $gt: 50 } })
```

---

#### Quiz

1. Select an answer choice and then click "See Results" to submit.

**Your company is conducting research on the customer experience and is focused on identifying unsatisfied customers. You need to find all customers with a satisfaction rating of 1 or 2.**

**Which of the following query documents would return all customers with a satisfaction rating of 1 or 2? (Select one.)**

- **A.** { "customer.satisfaction" : { $gt : 1}}
    
    Incorrect. This query would return all documents with a customer satisfaction rating greater than 1. To solve this problem, you need to select a query that returns all documents with a customer satisfaction rating less than or equal to 2.
    
- **B.** { customer.satisfaction : { $lte : 2}}
    
    Incorrect. This syntax is incorrect. Remember, to access subdocuments, you must use the syntax `“field.nestedfield”`, which includes quotation marks.
    
- **C.** { "customer.satisfaction" : { $lt : 2}}
    
    Incorrect. This query would return all documents with a customer satisfaction rating less than 2. To solve this problem, you need to select a query that returns all documents with a customer satisfaction rating less than or equal to 2.
    
- **D.** { "customer.satisfaction" : { $lte : 2}}
    
    Correct! This query will return all documents with a customer satisfaction rating of less than or equal to 2.
    
2. Select an answer choice and then click "See Results" to submit.

**Your company wants to offer a special discount for customers who are 65 or older. Your task is to find the records for these customers. Which of the following queries would return documents for all customers 65 or older? (Select all that apply.)**

- **A.** { customer.age : { $gte : 65 }}
    
    Incorrect. This syntax is incorrect. Remember, to access subdocuments, you must use the syntax `“field.nestedfield”`, which includes quotation marks.
    
- **B.** { "customer.age" : { $gt : 64 }}
    
    Correct! This query would return all documents where the customer age is greater than 64, which includes those 65 and older.
    
- **C.** { "customer.age" : { $gte : 65 }}
    
    Correct! This query would return all documents where the customer age is greater than or equal to 65.
    
- **D.** { "customer.age" : { $lte : 65 }}
    
    Incorrect. This query would return all documents where the customer age is less than or equal to 65. To solve this problem, you need to find all documents where the customer age is 65 or older.
### Lesson 4. Querying on Arrays Element in MongoDB
#### $elemMatch

```jsx
// format
{ <field>: { $elemMatch:
	{
		<query1>,
		<query2>,
		...
	}
}}

// Find Document with an Array that contains a specified value
db.accounts.find({ products: "InvestmentFund"})

db.account.find({
	products: {
		$elemMatch: { $eq: "InvestmentStock" } // $eq: 생략가능
	}
})

db.sales.find({
	items: {
		$elemMatch: { name: "laptop", price: { $gt: 800 }, quantity: { $gte: 1 } },
	},
})
```

---

#### Quiz

1. Select one answer choice and then click "See Results" to submit. (Select one.)

**Which of the following operators can be used to find a subdocument that matches specific criteria in an array?**

- **A.** &element
    
    Incorrect. This is not a valid operator included in the MongoDB Shell. What operator can you use to find a subdocument that matches specific criteria in an array?
    
- **B.** $elemMatch
    
    Correct! The `$elemMatch` operator is a valid operator that's included in the MongoDB Shell to find a subdocument that matches specific criteria in an array.
    
- **C.** $subMatch
    
    Incorrect. This is not a valid operator included in the MongoDB Shell. What operator can you use to find a subdocument that matches specific criteria in an array?
    
- **D.** $docMatch
    
    Incorrect. This is not a valid operator included in the MongoDB Shell. What operator can you use to find a subdocument that matches specific criteria in an array?
    
2. Select one or more answer choices and then click "See Results" to submit.

**What will the following query return? (Select one.)**

```scss
db.books.find({ genre: "Historical" })
```

- **A.** All documents where the genre field is equal to either the scalar value of “Historical” or an array that contains “Historical”.
    
    Correct! This query will return all documents that contain “Historical” as a scalar value and as an array element within the genre field.
    
- **B.** All documents that contain the string “Historical” across any field.
    
    Incorrect. This query will not return all documents that contain the string “Historical” in any field. It will return all documents that contain “Historical” as a scalar value and as an array element within the genre field.
    
- **C.** All documents where the genre field does not contain the value “Historical”.
    
    Incorrect. This query will not filter out all documents that contain the string “Historical” in any field. It will return all documents that contain “Historical” as a scalar value and as an array element within the genre field.
